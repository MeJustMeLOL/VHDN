<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Infographic — Đo lường & Phản hồi (Cross-Line Poly-Nodes)</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@800&display=swap" rel="stylesheet">
<script src="https://unpkg.com/feather-icons"></script>

<style>
  :root {
    --title-font: 'Playfair Display', serif;
    --body-font: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    --soft-bg-1: #FFF6F3;
    --soft-bg-2: #FEF8FF;
    --brand: #E07A5F;
    --muted: #6b7280;
    --text: #071422;
    --line-color: rgba(0, 0, 0, 0.1);
    --node-bg-main: #FFFFFF;
    --node-bg-alt: #F8F8F8; /* Lighter background for the cut-out effect */
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }
  html, body { height: 100%; width: 100%; }

  body {
    font-family: var(--body-font);
    background: linear-gradient(180deg, var(--soft-bg-1), var(--soft-bg-2));
    color: var(--text);
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
  }

  .slide-container {
    width: 100%;
    max-width: 1100px;
    padding: 32px;
    display: grid;
    grid-template-columns: 4fr 5fr;
    gap: 48px;
    align-items: center;
  }

  .header-content { text-align: left; }

  h1 {
    font-family: var(--title-font);
    font-size: clamp(36px, 5vw, 44px);
    line-height: 1.15;
    margin-bottom: 20px;
  }

  p.subtitle {
    color: var(--muted);
    font-size: clamp(16px, 2vw, 18px);
    line-height: 1.6;
    max-width: 400px;
    border-left: 3px solid var(--brand);
    padding-left: 20px;
  }

  /* --- Right Side: Cross-Line Poly-Nodes --- */
  .feedback-loop {
    position: relative;
    width: 100%;
    height: 500px;
  }

  .node {
    position: absolute;
    width: 260px;
    height: auto; /* Allow height to adjust to content */
    min-height: 120px;
    background: var(--node-bg-main);
    border: 1px solid var(--line-color);
    box-shadow: 0 8px 24px rgba(180, 90, 60, 0.08);
    padding: 20px;
    display: flex;
    align-items: flex-start;
    gap: 16px;
    opacity: 0; /* Animation setup */
    transform: scale(0.95);
    transition: all 0.5s cubic-bezier(.2,.95,.2,1);

    /* --- Cross-line / Poly-shape effect --- */
    clip-path: polygon(
        0% 10%,   /* top-left start */
        10% 0%,   /* top-left corner */
        100% 0%,  /* top-right corner */
        100% 90%, /* bottom-right start */
        90% 100%, /* bottom-right corner */
        0% 100%   /* bottom-left corner */
    );
    border-radius: 4px; /* Soften overall corners */
  }

  /* Adjust padding and background for the visual cut-out */
  .node::before {
    content: '';
    position: absolute;
    inset: 1px; /* To make sure border shows */
    background: var(--node-bg-main);
    clip-path: polygon(
        0% 10%,
        10% 0%,
        100% 0%,
        100% 90%,
        90% 100%,
        0% 100%
    );
    border-radius: 4px;
    z-index: -1;
  }
  .node::after {
    content: '';
    position: absolute;
    left: 10%; top: 0;
    width: 90%; height: 10%;
    background: var(--node-bg-alt); /* Lighter cut-out color */
    z-index: 0;
  }
  .node:hover {
      box-shadow: 0 12px 30px rgba(180, 90, 60, 0.12);
      transform: scale(1.02);
  }

  .node-icon {
    width: 40px; height: 40px;
    flex-shrink: 0;
    border-radius: 50%;
    background-color: var(--soft-bg-1);
    color: var(--brand);
    display: grid;
    place-items: center;
  }

  .node-title { font-weight: 600; font-size: 16px; margin-bottom: 4px; }
  .node-desc { font-size: 14px; color: var(--muted); line-height: 1.5; }

  /* Node Positioning */
  #node-1 { top: 0; left: 0; }
  #node-2 { top: 160px; right: 0; }
  #node-3 { bottom: 0; left: 80px; }

  /* SVG Connectors */
  .connector-svg {
    position: absolute;
    inset: 0;
    pointer-events: none;
  }
  .connector-svg path {
    stroke-width: 2;
    stroke: var(--line-color);
    fill: none;
    stroke-linecap: round;
    stroke-linejoin: round;
    stroke-dasharray: 1000;
    stroke-dashoffset: 1000;
  }

  /* Animation */
  .animate-in .animate-item {
      opacity: 1;
      transform: translateY(0);
  }
  .animate-in .node {
      opacity: 1;
      transform: scale(1);
  }
  .animate-in .connector-svg path {
      animation: draw-line 1.2s ease-out forwards;
  }
  @keyframes draw-line {
      to { stroke-dashoffset: 0; }
  }

  @media (max-width: 900px) {
      .slide-container { grid-template-columns: 1fr; text-align: center; }
      .header-content { align-items: center; }
      .feedback-loop { transform: scale(0.9); margin-left: -5%; }
  }
</style>
</head>
<body>

<div class="slide-container" id="slide-container">

  <header class="header-content">
    <h1 class="animate-item">Bước10:Đo lường & Phản hồi</h1>
    <p class="subtitle animate-item" style="transition-delay: 100ms;">Tạo một chu trình liên tục để thu thập dữ liệu, phân tích và hành động nhằm cải tiến văn hoá.</p>
  </header>

  <div class="feedback-loop">
      <svg class="connector-svg">
          <defs>
              <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
                  <polygon points="0 0, 10 3.5, 0 7" fill="var(--line-color)" />
              </marker>
          </defs>
          <path d="M 130 102 C 130 162, 380 152, 380 212" style="animation-delay: 0.5s;" />
          <path d="M 380 298 C 380 358, 210 358, 210 418" style="animation-delay: 0.8s;" />
          <path d="M 210 498 C 10 458, 10 162, 130 102" marker-end="url(#arrowhead)" style="animation-delay: 1.1s;" />
      </svg>

      <div id="node-1" class="node animate-item" style="transition-delay: 200ms;">
          <div class="node-icon"><i data-feather="settings"></i></div>
          <div>
              <h3 class="node-title">Thiết lập & Đo lường</h3>
              <p class="node-desc">Xác định KPI văn hoá. Thu thập dữ liệu qua khảo sát, 360°, quan sát.</p>
          </div>
      </div>

      <div id="node-2" class="node animate-item" style="transition-delay: 400ms;">
          <div class="node-icon"><i data-feather="pie-chart"></i></div>
          <div>
              <h3 class="node-title">Phân tích & Phản hồi</h3>
              <p class="node-desc">Tổng hợp dữ liệu, xác định xu hướng và chia sẻ trong các buổi 1:1, họp team.</p>
          </div>
      </div>

      <div id="node-3" class="node animate-item" style="transition-delay: 600ms;">
          <div class="node-icon"><i data-feather="trending-up"></i></div>
          <div>
              <h3 class="node-title">Hành động & Cải tiến</h3>
              <p class="node-desc">Xây dựng kế hoạch hành động cụ thể, coaching, và tối ưu quy trình liên tục.</p>
          </div>
      </div>
  </div>

</div>

<script>
  feather.replace();

  function resetAnimations() {
    document.getElementById('slide-container').classList.remove('animate-in');
  }

  function animateSlide() {
    resetAnimations();
    setTimeout(() => {
      document.getElementById('slide-container').classList.add('animate-in');
    }, 10);
  }

  document.addEventListener('DOMContentLoaded', resetAnimations);

  window.addEventListener('message', (ev) => {
    const data = ev.data || {};
    if (!data.type) return;
    switch (data.type) {
      case 'reset': case 'hide': resetAnimations(); break;
      case 'animate-slide': animateSlide(); break;
      case 'getNotes': try { ev.source.postMessage({ type: 'notes', notes: 'Feedback loop infographic with cross-line poly-nodes.' }, '*'); } catch (e) {} break;
    }
  });

  window.addEventListener('load', () => {
    try { window.parent.postMessage({ type: 'slide-ready' }, '*'); } catch (e) {}
  }, { once: true });
</script>

</body>
</html>
